# SQL 연습
### SELECT
#### 1. 모든 레코드 조회 ANIMAL_ID 순으로 정렬 (기본값: ASC)
```sql
SELECT * 
FROM ANIMAL_INS 
ORDER BY ANIMAL_ID;
```
#### 2. 특정 두 컬럼 조회, 역순으로 정렬
```sql
SELECT NAME, DATETIME 
FROM ANIMAL_INS 
ORDER BY ANIMAL_ID DESC
```
#### 3. 특정 컬럼의 특정 값을 가진 데이터 찾기
```sql
SELECT ANIMAL_ID, NAME 
FROM ANIMAL_INS 
WHERE INTAKE_CONDITION = "Sick" 
ORDER BY ANIMAL_ID
```
#### 4. 특정 컬럼의 특정 값이 아닌 데이터 찾기
```sql
SELECT ANIMAL_ID, NAME 
FROM ANIMAL_INS
WHERE INTAKE_CONDITION != "Aged" 
ORDER BY ANIMAL_ID
```
#### 5. 여러 기준으로 정렬 하기
```sql
SELECT ANIMAL_ID, NAME, DATETIME 
FROM ANIMAL_INS 
ORDER BY NAME ASC, DATETIME DESC
```
#### 6. 상위 N개 레코드
```sql
SELECT NAME 
FROM ANIMAL_INS 
ORDER BY DATETIME LIMIT 1
```
#### 7. 최대값 구하기
```sql
SELECT MAX(DATETIME) 
FROM ANIMAL_INS
```
### SUM, MAX, MIN
#### 8. 최솟값 구하기
```sql
SELECT MIN(DATETIME) 
FROM ANIMAL_INS
```
#### 9. 데이터의 수 구하기
```sql
SELECT COUNT(*) 
FROM ANIMAL_INS
```
#### 10. 중복제거 => DISTINCT, is not NULL => NULL 제거
```sql
SELECT COUNT(DISTINCT NAME) 
FROM ANIMAL_INS 
WHERE NAME is not NULL
```
### Group By
#### 11. 고양이와 개는 각각 몇마리 있는가?
```sql
SELECT ANIMAL_TYPE, COUNT(ANIMAL_TYPE) 
FROM ANIMAL_INS 
WHERE ANIMAL_TYPE = 'Cat' or ANIMAL_TYPE = 'Dog' 
GROUP BY ANIMAL_TYPE 
ORDER BY ANIMAL_TYPE
```
#### 12. 같은 이름이 두개 이상, 이름이 없으면 제외, 결과는 이름 순
```sql
SELECT NAME, COUNT(NAME) 
FROM ANIMAL_INS 
WHERE NAME is not NULL 
Group By NAME
HAVING COUNT(NAME) >= 2 
ORDER By NAME
```
#### 13. 09:00부터 19:59까지, 각 시간대별로 입양이 몇 건이나 발생했는지 조회
```sql
SELECT HOUR(DATETIME) AS HOUR, COUNT(DATETIME)
FROM ANIMAL_OUTS
GROUP BY HOUR
HAVING HOUR BETWEEN 9 AND 19
ORDER BY HOUR
```
#### 14. 0시부터 23시까지, 각 시간대별로 입양이 몇 건이나 발생했는지 조회하는 SQL문을 작성해주세요. 이때 결과는 시간대 순으로 정렬 <없으면 0 으로 표시>
```sql
WITH RECURSIVE TIME as (
    SELECT 0 as HOUR # 초기 HOUR 값 설정
    UNION ALL # 위, 아래 쿼리 값 연산
    SELECT HOUR+1 FROM TIME # HOUR를 하나씩 증가 시킴
    WHERE HOUR < 23 # RECURSIVE 멈춤 조건
)
SELECT HOUR, COUNT(DATETIME)
FROM TIME
    left join ANIMAL_OUTS ON HOUR = HOUR(DATETIME)
GROUP By HOUR
ORDER BY HOUR
```
### IS NULL
#### 15. 이름이 없는 동물, ID는 오름차순 정렬
```sql
SELECT ANIMAL_ID 
FROM ANIMAL_INS 
WHERE NAME IS NULL 
ORDER BY ANIMAL_ID 
```
#### 16. 이름이 있는 동물, ID는 오름차순 정렬
```sql
SELECT ANIMAL_ID 
FROM ANIMAL_INS 
WHERE NAME IS NOT NULL 
ORDER BY ANIMAL_ID 
```
#### 16. NULL을 "No name"으로 변경해 표시하기
```sql
SELECT ANIMAL_TYPE, IFNULL(NAME, "No name") AS NAME, SEX_UPON_INTAKE
FROM ANIMAL_INS
ORDER BY ANIMAL_ID 
```
### JOIN
```sql
-- INNER JOIN: 교집합
SELECT TABLE1.col1, TABLE1.col2, ...
FROM TABLE1
JOIN TABLE2 ON TABLE1.col1 = table2.col2

-- LEFT OUTER JOIN: (A U B) - B (=LEFT JOIN)
SELECT TABLE1.col1, TABLE1.col2, ...
FROM TABLE1
LEFT OUTER JOIN TABLE2 ON TABLE1.col1 = table2.col2

-- RIGTH OUTER JOIN: (A U B) - A (=RIGHT JOIN)
SELECT TABLE1.col1, TABLE1.col2, ...
FROM TABLE1
RIGHT OUTER JOIN TABLE2 ON TABLE1.col1 = table2.col2
```
#### 17. 없어진 기록 찾기 - 입양간 기록은 있는데, 보호소에 들어온 기록이 없는 동물
```sql
SELECT OUTS.ANIMAL_ID, OUTS.NAME
FROM ANIMAL_OUTS AS OUTS
LEFT JOIN ANIMAL_INS AS INS USING(ANIMAL_ID)
-- LEFT JOIN ANIMAL_INS AS INS ON INS.ANIMAL_ID = OUTS.ANIMAL_ID
WHERE INS.ANIMAL_ID IS NULL
ORDER BY ANIMAL_ID
```
#### 18. 있었는데요 없었습니다. - 보호 시작일보다 입양일이 더 빠른 동물 찾기
```sql
SELECT DISTINCT INS.ANIMAL_ID, INS.NAME
FROM ANIMAL_INS AS INS
LEFT JOIN ANIMAL_OUTS AS OUTS ON INS.ANIMAL_ID = OUTS.ANIMAL_ID
WHERE INS.DATETIME > OUTS.DATETIME
ORDER BY INS.DATETIME
```
#### 19. 오랜기간 보호한 동물. - 입양을 못간 동물 중, 가장 오래 보호소에 있던 동물 3마리
```sql
SELECT INS.NAME, INS.DATETIME
FROM ANIMAL_INS AS INS
LEFT JOIN ANIMAL_OUTS AS OUTS ON INS.ANIMAL_ID = OUTS.ANIMAL_ID
WHERE OUTS.ANIMAL_ID IS NULL
ORDER BY INS.DATETIME LIMIT 3
```
#### 20. 보호소에서 중성화한 동물. - 들어올 당시 중성화X, 나갈 떈 중성화O
```sql
SELECT INS.ANIMAL_ID, INS.ANIMAL_TYPE, INS.NAME
FROM ANIMAL_INS AS INS
LEFT JOIN ANIMAL_OUTS AS OUTS USING(ANIMAL_ID)
WHERE INS.SEX_UPON_INTAKE != OUTS.SEX_UPON_OUTCOME
ORDER BY INS.ANIMAL_ID
```
### String, Date
#### 21. 
```sql

```


